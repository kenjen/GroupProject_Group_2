<!DOCTYPE html>
<html data-ng-app>
	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="description" content="">
		<meta name="author" content="">

		<title>Dashboard</title>

		<!-- Bootstrap Core CSS -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- Custom CSS -->
		<link href="css/sb-admin.css" rel="stylesheet">


		<!-- Custom Fonts -->
		<link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
		
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>

	</head>

	<body>

		<div id="wrapper">

			<!-- Navigation -->
			<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
						<span class="sr-only">Toggle navigation</span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="index.html">Systems Administrator</a>
				</div>
				<!-- Top Menu Items -->
				<ul class="nav navbar-right top-nav">
					<li class="dropdown">
					<li class="dropdown">
						<a href="login.html" onclick="eraseCookie('usercookie')"><i class="fa fa-fw fa-power-off"></i> Log Out</a>

					</li>
				</ul>
				<!-- Sidebar Menu Items - These collapse to the responsive navigation menu on small screens -->
				<div class="collapse navbar-collapse navbar-ex1-collapse">
					<ul class="nav navbar-nav side-nav">
						<li class="active">
							<a href="index.html"><i class="fa fa-fw fa-dashboard"></i> Dashboard</a>
						</li>
						<li>
							<a href="queries.html"><i class="fa fa-fw fa-table"></i> Queries</a>
						</li>
						<li>
							<a href="upload.html"><i class="fa fa-fw fa-upload"></i> Import & Upload</a>
						</li>
						<li>
							<a href="javascript:;" data-toggle="collapse" data-target="#demo"><i class="fa fa-fw fa-user"></i> User Administration <i class="fa fa-fw fa-caret-down"></i></a>
							<ul id="demo" class="collapse">
								<li>
									<a href="addUser.html">Add User</a>
								</li>
								<li>
									<a href="editUser.html">Edit User</a>
								</li>
								<li>
									<a href="removeUser.html">Remove User</a>
								</li>
							</ul>
						</li>

					</ul>
				</div>
				<!-- /.navbar-collapse -->
			</nav>

			<div id="page-wrapper">

				<div class="container-fluid">

					<!-- Page Heading -->
					<div class="row">
						<div class="col-lg-12">
							<h1 class="page-header"> Dashboard <small>Overview</small></h1>
							<ol class="breadcrumb">
								<li class="active">
									<i class="fa fa-dashboard"></i> Dashboard
								</li>
							</ol>
						</div>
					</div>
					<!-- /.row -->

					<div class="row">
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-primary">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-table fa-5x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div><h4>Queries!</h4></div>
                                    </div>
                                </div>
                            </div>
                            <a href="queries.html">
                                <div class="panel-footer">
                                    <span class="pull-left">Go!</span>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-green">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-upload fa-5x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div><h4>Import and Upload!</h4></div>
                                    </div>
                                </div>
                            </div>
                            <a href="upload.html">
                                <div class="panel-footer">
                                    <span class="pull-left">Go!</span>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-3 col-md-6">
                        <div class="panel panel-yellow">
                            <div class="panel-heading">
                                <div class="row">
                                    <div class="col-xs-3">
                                        <i class="fa fa-user fa-5x"></i>
                                    </div>
                                    <div class="col-xs-9 text-right">
                                        <div><h4>User Administration</h4></div>
                                    </div>
                                </div>
                            </div>
                            <a href="addUser.html">
                                <div class="panel-footer">
                                    <span class="pull-left">Go!</span>
                                    <span class="pull-right"><i class="fa fa-arrow-circle-right"></i></span>
                                    <div class="clearfix"></div>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
                <!-- /.row -->

				<div class="row"  data-ng-controller="tableLoader">
					<h2 align="center">Auto Uploaded Files</h2>
					
								<table id="trackTable" border=1 class="table table-bordered table-hover table-striped">
									<thead>
										<tr>
											<th class="dateUploaded">Date Uploaded</th>
											<th class="fileName">File Name</th>
											<th class="numberOfErrors">Number of Errors</th>
										</tr>
									</thead>
									<tbody>
										<tr data-ng-repeat="record in records">
											<td class="dateUploaded">{{record[0]}}</td>
											<td class="fileName">{{record[1]}}</td>
											<td class="numberOfErrors">{{record[2]}}</td>
										</tr>
									</tbody>
								</table>
							</div>
		
						<!--  -->
						
					<div class="row">
						<div class="col-lg-12" style="height: 400px;">

						</div>
					</div>

				</div><!-- /.container-fluid -->

			</div>	<!-- /#page-wrapper -->
			

		</div><!-- /#wrapper -->
	

		

		<!-- jQuery -->
		<script src="js/jquery.js"></script>

		<!-- Bootstrap Core JavaScript -->
		<script src="js/bootstrap.min.js"></script>


		<script>
			
			 var x = readCookie('usercookie')
			 if (x) {
			 var userType = x.charAt(x.length - 2)
			 if (userType != 0) {
			 window.location.replace("/GroupProject_Group2/alt_index.html");
			 }
			 } else {
			 window.location.replace("/GroupProject_Group2/alt_index.html");
			 }
			 

			var x = readCookie('usercookie')
			if (!x) {
				window.location.replace("/GroupProject_Group2/login.html");
			}
			
			function tableLoader($scope, $http) {
								
				$http.get('/GroupProject_Group2/rest/file_log/getlog/').success(function(data) {
						$scope.records = data;
				});

			}
			
			function scrollListener(){
				if(scrollListening){
					var div = document.getElementById("queryTable");
					var scrolltop = div.scrollTop;
					var scrollheight = div.scrollHeight;
					if(scrolltop >= scrollheight - (scrollheight/8)){
						scrollListening = false;
						document.getElementById("clickLink").click();
					}
				}
			}	
				
			
			

			function createCookie(name, value, days) {
				if (days) {
					var date = new Date();
					date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
					var expires = "; expires=" + date.toGMTString();
				} else
					var expires = "";
				document.cookie = name + "=" + value + expires + "; path=/";
			}

			function readCookie(name) {
				var nameEQ = name + "=";
				var ca = document.cookie.split(';');
				for (var i = 0; i < ca.length; i++) {
					var c = ca[i];
					while (c.charAt(0) == ' ')
					c = c.substring(1, c.length);
					if (c.indexOf(nameEQ) == 0) {
						//alert("found cookie on click: " + c.substring(nameEQ.length, c.length));
						return c.substring(nameEQ.length, c.length);
					}
				}
				return null;
			}

			function eraseCookie(name) {
				createCookie(name, "", -1);
				window.location.replace("/GroupProject_Group2/login.html");
			}

		</script>

	</body>

</html>
