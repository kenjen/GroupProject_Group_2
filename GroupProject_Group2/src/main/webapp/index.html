<!DOCTYPE html>

<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1.0, maximum-scale=2.0">

	<title>EventCauseCombi</title>
	<!--<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
	<link rel="stylesheet" type="text/css" href="resources/syntax/shCore.css">
	<link rel="stylesheet" type="text/css" href="resources/demo.css">
	<link rel="stylesheet" href="media/css/bootstrap-table.css">-->
	<style>
		#eventCauseCombi {
			font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;
			width: 100%;
			border-collapse: collapse;
		}

		#eventCauseCombi td, #customers th {
			font-size: 0.8em;
			border: 1px solid #005EA7;
			padding: 3px 7px 2px 7px;
		}

		#eventCauseCombi th {
			font-size: 1em;
			text-align: center;
			padding-top: 5px;
			padding-bottom: 4px;
			background-color: #005EA7;
			color: #ffffff;
		}

		#eventCauseCombi tr.alt td {
			color: #000000;
			background-color: #b5e8f6;
		}
	</style>
	<!--<script type="text/javascript"  src="media/js/jquery.js"></script>
	<script type="text/javascript"  src="resources/syntax/shCore.js"></script>
	<script type="text/javascript"  src="resources/demo.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
	<script src="media/js/bootstrap-table.js"></script>
	<script type="text/javascript"  class="init"></script>-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
</head>

<body>
	<h3>Enter Imsi for Event/Cause combo</h3>
	<form name="imsi" id="imsi" onsubmit="findEventCauseByIMSI()" method="get">
		IMSI:
		<input type="number" name="imsi" id="imsi">
		<input type="submit" value="Submit">
	</form>
	<h1>Event Cause Combi</h1>

<p id="event"></p>
<p id="cause"></p>
	<!--<table id ="eventCauseCombi"  data-toggle="table" data-url="rest/event_cause/imsi" data-width="299">
			<thead>
		<tr>
		 <th data-field="id">Id</th>
		 <th data-field="causeCode">Cause Code</th>
		 <th data-field="cellId">Cell Id</th>
		<th data-field="date">Date</th>
		<th data-field="duration">Duration</th>
		<th data-field="eventId">Event Id</th>
		<th data-field="failureClass">Failure Class</th>
		<th data-field="hier321Id">Hier321_Id</th>
		<th data-field="hier32Id">Hier32_Id</th>
		<th data-field="hier3Id">Hier3_Id</th>
		<th data-field="imsi">Imsi</th>
		<th data-field="mcc">Mcc</th>
		<th data-field="mnc">MNC</th>
		<th data-field="neVersion">Ne Version</th>
		<th data-field="tac">Tac</th>		
		</tr>
		</thead>
	</table>-->

	<script>
	//	var imsi = $('#imsi').serialize();
		var imsi = JSON.stringify({"imsi" : $('#imsi').val()});
	//	$('#imsiform').submit(findEventCauseByIMSI(imsi));
		
		function validateInput() { 
			displayData;
		}

		//<!--	if (imsi == null || imsi == "") {
		//		alert("Please insert IMSI!");
		//		return false;
		//	} else if (imsi != 15) {
		//		alert("IMSI must be 15 digits length!");
		//		return false;
		//	}
		//	else{
		//		displayData;
		//	}-->

		var x = readCookie('usercookie')
		if (x) {
			//alert("cookie on welcome page!!!!!!!!!!!!!!!!: " + x);
		} else {
			window.location.replace("/GroupProject_Group2/");
		}

		function readCookie(name) {
			var nameEQ = name + "=";
			var ca = document.cookie.split(';');
			for (var i = 0; i < ca.length; i++) {
				var c = ca[i];
				while (c.charAt(0) == ' ')
				c = c.substring(1, c.length);
				if (c.indexOf(nameEQ) == 0) {
					//alert("found cookie on click: " + c.substring(nameEQ.length, c.length));
					return c.substring(nameEQ.length, c.length);
				}
			}
			return null;
		}

		
		function findEventCauseByIMSI() {
			$.ajax({
			type: 'GET',
			url: '/rest/event_cause'+'/'+ $('#imsi').val(),
			contentType: 'application/json',
		//	data: JSON.stringify({"imsi" : $('#imsi').val()}),
		//	processData:false,
			success: function(data){
			//	$('#imsiform').show();
					for (var i = 0; i < myData.length-1; i++) {
				$("#event").text(myData[i][0]);
				$("#cause").text(myData[i][1]);
				
			}
			$("p").fadeOut(4000).fadeIn(4000);
			}	

		});
		}
		
		function formToJSON(){
			return JSON.stringify({
				"eventId": $('#eventid').val(),
				"causeCode": $('#causeCode').val(),
			});
		}

		
		function getDataByImsi() {
			$.get('/rest/event_cause/imsi', null,
			handleResponseJQuery);
		}
		function handleResponseJQuery(myData) {
	//myData = JSON.parse(data);
	  		for (var i = 0; i < myData.length-1; i++) {
				$("#event").text(myData[i][0]);
				$("#cause").text(myData[i][1]);
				
			}
			$("p").fadeOut(4000).fadeIn(4000);
		}



	</script>

</body>
</html>

