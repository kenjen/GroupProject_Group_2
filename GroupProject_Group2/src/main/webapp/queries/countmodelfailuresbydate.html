<!DOCTYPE html>
<html ng-app>
	<head>
		<meta charset="ISO-8859-1">
		<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.0.8/angular.min.js"></script>
		
	</head>
	<body ng-controller="phoneModelLoader">
		<form id='form' style="text-align:center">
			Choose Phone Model:
			<select id="phoneModelSelection">
				<option ng-repeat="model in models" value={{model.tac}}>{{model.tac}}  -  {{model.marketingName}}</option>
			</select>
			Start Date:
			<input type="datetime-local" id="startDate" name="startDate" value="2013-02-20T09:00:00"/>
			End Date:
			<input type="datetime-local" id="endDate" name="endDate" value="2013-02-20T13:00:00"/>
			<br><br><br>
			<input type='button' onClick='refreshTable();' value="Refresh" />
		</form>
		
		<script type="text/javascript">

			function phoneModelLoader($scope, $http) {
				$http.get('/GroupProject_Group2/rest/ue/getAllModels').
				success(function(data) {
					$scope.models = data;
			});
				
			function refreshTable(){
				var startDate = document.getElementById('startDate').value;
				var endDateA = document.getElementById('endDate').value;
				var endDateB = document.getElementById('endDate').value;
				var tac = document.getElementById('phoneModelSelection').value;
				if(endDateA.length == 16){
					endDateB = endDateA.concat(":00");
				}
				var dates = startDate.concat(endDateB);
				var datesTac = dates.concat(tac);
				var code = "c03";
				window.parent.name = code.concat(datesTac);
				var tableFrame = window.top.document.getElementById('tableFrame');
				tableFrame.src = "/GroupProject_Group2/queries/querytable.html";
			}
		</script>
	</body>
</html>
